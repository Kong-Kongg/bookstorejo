{"remainingRequest":"/Users/jingwow/Desktop/STUDY/前段框架开发/bookstorejo/node_modules/babel-loader/lib/index.js!/Users/jingwow/Desktop/STUDY/前段框架开发/bookstorejo/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/jingwow/Desktop/STUDY/前段框架开发/bookstorejo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jingwow/Desktop/STUDY/前段框架开发/bookstorejo/src/views/Books.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jingwow/Desktop/STUDY/前段框架开发/bookstorejo/src/views/Books.vue","mtime":1669789949688},{"path":"/Users/jingwow/Desktop/STUDY/前段框架开发/bookstorejo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jingwow/Desktop/STUDY/前段框架开发/bookstorejo/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jingwow/Desktop/STUDY/前段框架开发/bookstorejo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jingwow/Desktop/STUDY/前段框架开发/bookstorejo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBCb29rTGlzdCBmcm9tICdAL2NvbXBvbmVudHMvQm9va0xpc3QnOwppbXBvcnQgTG9hZGluZyBmcm9tICdAL2NvbXBvbmVudHMvTG9hZGluZy52dWUnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0Jvb2tzJywKICBwcm9wczogWycnXSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGl0bGU6ICcnLAogICAgICBib29rczogW10sCiAgICAgIG1lc3NhZ2U6ICcnLAogICAgICBsb2FkaW5nOiB0cnVlLAogICAgICB0b3RhbDogNSwKICAgICAgcGFnZU51bTogMSwKICAgICAgcGFnZVNpemU6IDIKICAgIH07CiAgfSwKICBiZWZvcmVSb3V0ZUVudGVyOiBmdW5jdGlvbiBiZWZvcmVSb3V0ZUVudGVyKHRvLCBmcm9tLCBuZXh0KSB7CiAgICBuZXh0KGZ1bmN0aW9uICh2bSkgewogICAgICB2bS50aXRsZSA9IHRvLm1ldGEudGl0bGU7CiAgICAgIHZhciB1cmwgPSB2bS5zZXRSZXF1ZXN0VXJsKHRvLmZ1bGxQYXRoKTsKICAgICAgdm0uZ2V0Qm9va3ModXJsLCB2bS5wYWdlTnVtLCB2bS5wYWdlU2l6ZSk7CiAgICB9KTsKICB9LAogIGJlZm9yZVJvdXRlVXBkYXRlOiBmdW5jdGlvbiBiZWZvcmVSb3V0ZVVwZGF0ZSh0bywgZnJvbSwgbmV4dCkgewogICAgdmFyIHVybCA9IHRoaXMuc2V0UmVxdWVzdFVybCh0by5mdWxsUGF0aCk7CiAgICB0aGlzLmdldEJvb2tzKHVybCwgdGhpcy5wYWdlTnVtLCB0aGlzLnBhZ2VTaXplKTsKICAgIG5leHQoKTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIEJvb2tMaXN0OiBCb29rTGlzdCwKICAgIExvYWRpbmc6IExvYWRpbmcKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldEJvb2tzOiBmdW5jdGlvbiBnZXRCb29rcyh1cmwsIHBhZ2VOdW0sIHBhZ2VTaXplKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLm1lc3NhZ2UgPSAnJzsKICAgICAgdGhpcy5heGlvcy5nZXQodXJsLCB7CiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBwYWdlTnVtOiBwYWdlTnVtLAogICAgICAgICAgcGFnZVNpemU6IHBhZ2VTaXplCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOyAvLyBpZiAocmVzcG9uc2UuZGF0YS5jb2RlID09IDIwMCkgewogICAgICAgIC8vICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgLy8gICB0aGlzLmJvb2tzID0gcmVzcG9uc2UuZGF0YS5kYXRhOwogICAgICAgIC8vICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLmRhdGEudG90YWw7CiAgICAgICAgLy8gICBpZiAodGhpcy5ib29rcy5sZW5ndGggPT09IDApIHsKICAgICAgICAvLyAgICAgaWYgKHRoaXMuJHJvdXRlLm5hbWUgPT09ICdjYXRlZ29yeScpCiAgICAgICAgLy8gICAgICAgdGhpcy5tZXNzYWdlID0gJ+W9k+WJjeWIhuexu+S4i+ayoeacieWbvuS5pu+8gSc7CiAgICAgICAgLy8gICAgIGVsc2UgdGhpcy5tZXNzYWdlID0gJ+ayoeacieaQnOe0ouWIsOWMuemFjeeahOWbvuS5pu+8gSc7CiAgICAgICAgLy8gICB9CiAgICAgICAgLy8gfQoKICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgX3RoaXMuYm9va3MgPSByZXNwb25zZS5kYXRhOwogICAgICAgIF90aGlzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS50b3RhbDsKCiAgICAgICAgaWYgKF90aGlzLmJvb2tzLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgaWYgKF90aGlzLiRyb3V0ZS5uYW1lID09PSAnY2F0ZWdvcnknKSBfdGhpcy5tZXNzYWdlID0gJ+W9k+WJjeWIhuexu+S4i+ayoeacieWbvuS5pu+8gSc7ZWxzZSBfdGhpcy5tZXNzYWdlID0gJ+ayoeacieaQnOe0ouWIsOWMuemFjeeahOWbvuS5pu+8gSc7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZXR1cm4gYWxlcnQoZXJyb3IpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDliqjmgIHorr7nva7mnI3liqHnq6/mlbDmja7mjqXlj6PnmoTor7fmsYJVUkwKICAgIHNldFJlcXVlc3RVcmw6IGZ1bmN0aW9uIHNldFJlcXVlc3RVcmwocGF0aCkgewogICAgICB2YXIgdXJsID0gcGF0aDsgLy8gaWYgKHBhdGguaW5kZXhPZignL2NhdGVnb3J5JykgIT0gLTEpIHsKICAgICAgLy8gICB1cmwgPSAnL2Jvb2snICsgdXJsICsgJy9wYWdlJzsKICAgICAgLy8gfQoKICAgICAgcmV0dXJuIHVybDsKICAgIH0sCiAgICBoYW5kbGVTaXplQ2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVTaXplQ2hhbmdlKHNlbGVjdGVkU2l6ZSkgewogICAgICB0aGlzLnBhZ2VTaXplID0gc2VsZWN0ZWRTaXplOyAvL2NvbnNvbGUubG9nKHRoaXMucGFnZVNpemUpIC8v5q+P6aG15LiL5ouJ5pi+56S65pWw5o2u5p2h5pWwCgogICAgICB2YXIgdXJsID0gdGhpcy5zZXRSZXF1ZXN0VXJsKHRoaXMuJHJvdXRlLmZ1bGxQYXRoKTsKICAgICAgdGhpcy5nZXRCb29rcyh1cmwsIHRoaXMucGFnZU51bSwgdGhpcy5wYWdlU2l6ZSk7CiAgICB9LAogICAgaGFuZGxlQ3VycmVudENoYW5nZTogZnVuY3Rpb24gaGFuZGxlQ3VycmVudENoYW5nZShjdXJyZW50UGFnZSkgewogICAgICB0aGlzLnBhZ2VOdW0gPSBjdXJyZW50UGFnZTsKICAgICAgdmFyIHVybCA9IHRoaXMuc2V0UmVxdWVzdFVybCh0aGlzLiRyb3V0ZS5mdWxsUGF0aCk7IC8vY29uc29sZS5sb2coY3VycmVudFBhZ2UpIC8v54K55Ye756ys5Yeg6aG1CgogICAgICB0aGlzLmdldEJvb2tzKHVybCwgdGhpcy5wYWdlTnVtLCB0aGlzLnBhZ2VTaXplKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["Books.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <Loading v-if=\"loading\" />\r\n    <h3 v-else>{{ title }}</h3>\r\n    <BookList :list=\"books\" v-if=\"books.length\" />\r\n    <h1>{{ message }}</h1>\r\n\r\n    <el-pagination\r\n      :hide-on-single-page=\"true\"\r\n      @size-change=\"handleSizeChange\"\r\n      :page-sizes=\"[2, 10, 20, 40]\"\r\n      @current-change=\"handleCurrentChange\"\r\n      :current-page=\"pageNum\"\r\n      :page-size=\"pageSize\"\r\n      layout=\"total, sizes, prev, pager, next, jumper\"\r\n      :total=\"total\"\r\n    >\r\n    </el-pagination\r\n    ><br />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport BookList from '@/components/BookList';\r\nimport Loading from '@/components/Loading.vue';\r\nexport default {\r\n  name: 'Books',\r\n  props: [''],\r\n  data() {\r\n    return {\r\n      title: '',\r\n      books: [],\r\n      message: '',\r\n      loading: true,\r\n      total: 5,\r\n      pageNum: 1,\r\n      pageSize: 2,\r\n    };\r\n  },\r\n\r\n  beforeRouteEnter(to, from, next) {\r\n    next((vm) => {\r\n      vm.title = to.meta.title;\r\n      let url = vm.setRequestUrl(to.fullPath);\r\n      vm.getBooks(url, vm.pageNum, vm.pageSize);\r\n    });\r\n  },\r\n  beforeRouteUpdate(to, from, next) {\r\n    let url = this.setRequestUrl(to.fullPath);\r\n    this.getBooks(url, this.pageNum, this.pageSize);\r\n    next();\r\n  },\r\n\r\n  components: {\r\n    BookList,\r\n    Loading,\r\n  },\r\n\r\n  methods: {\r\n    getBooks(url, pageNum, pageSize) {\r\n      this.message = '';\r\n      this.axios\r\n        .get(url, { params: { pageNum, pageSize } })\r\n        .then((response) => {\r\n          console.log(response.data);\r\n\r\n          // if (response.data.code == 200) {\r\n          //   this.loading = false;\r\n          //   this.books = response.data.data;\r\n          //   this.total = response.data.total;\r\n          //   if (this.books.length === 0) {\r\n          //     if (this.$route.name === 'category')\r\n          //       this.message = '当前分类下没有图书！';\r\n          //     else this.message = '没有搜索到匹配的图书！';\r\n          //   }\r\n          // }\r\n\r\n          this.loading = false;\r\n          this.books = response.data;\r\n          this.total = response.data.total;\r\n          if (this.books.length === 0) {\r\n            if (this.$route.name === 'category')\r\n              this.message = '当前分类下没有图书！';\r\n            else this.message = '没有搜索到匹配的图书！';\r\n          }\r\n        })\r\n        .catch((error) => alert(error));\r\n    },\r\n    // 动态设置服务端数据接口的请求URL\r\n    setRequestUrl(path) {\r\n      let url = path;\r\n      // if (path.indexOf('/category') != -1) {\r\n      //   url = '/book' + url + '/page';\r\n      // }\r\n      return url;\r\n    },\r\n    handleSizeChange(selectedSize) {\r\n      this.pageSize = selectedSize;\r\n      //console.log(this.pageSize) //每页下拉显示数据条数\r\n      let url = this.setRequestUrl(this.$route.fullPath);\r\n      this.getBooks(url, this.pageNum, this.pageSize);\r\n    },\r\n\r\n    handleCurrentChange(currentPage) {\r\n      this.pageNum = currentPage;\r\n      let url = this.setRequestUrl(this.$route.fullPath);\r\n      //console.log(currentPage) //点击第几页\r\n      this.getBooks(url, this.pageNum, this.pageSize);\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped></style>\r\n"],"sourceRoot":"src/views"}]}