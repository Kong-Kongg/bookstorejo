{"remainingRequest":"/Users/jingwow/Desktop/STUDY/前段框架开发/bookstorejo/node_modules/babel-loader/lib/index.js!/Users/jingwow/Desktop/STUDY/前段框架开发/bookstorejo/node_modules/eslint-loader/index.js??ref--13-0!/Users/jingwow/Desktop/STUDY/前段框架开发/bookstorejo/src/store/modules/cart.js","dependencies":[{"path":"/Users/jingwow/Desktop/STUDY/前段框架开发/bookstorejo/src/store/modules/cart.js","mtime":1669724849883},{"path":"/Users/jingwow/Desktop/STUDY/前段框架开发/bookstorejo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jingwow/Desktop/STUDY/前段框架开发/bookstorejo/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jingwow/Desktop/STUDY/前段框架开发/bookstorejo/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXgiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5yZWR1Y2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UiOwp2YXIgc3RhdGUgPSB7CiAgaXRlbXM6IFtdIC8vcXVhbnRpdHk6IDAKCn07IC8vIG11dGF0aW9ucwoKdmFyIG11dGF0aW9ucyA9IHsKICAvLyDmt7vliqDllYblk4HliLDotK3nianovabkuK0KICBwdXNoUHJvZHVjdFRvQ2FydDogZnVuY3Rpb24gcHVzaFByb2R1Y3RUb0NhcnQoc3RhdGUsIF9yZWYpIHsKICAgIHZhciBpZCA9IF9yZWYuaWQsCiAgICAgICAgaW1nVXJsID0gX3JlZi5pbWdVcmwsCiAgICAgICAgdGl0bGUgPSBfcmVmLnRpdGxlLAogICAgICAgIHByaWNlID0gX3JlZi5wcmljZSwKICAgICAgICBxdWFudGl0eSA9IF9yZWYucXVhbnRpdHk7CiAgICBjb25zb2xlLmxvZygnbm5uJyk7CiAgICBpZiAoIXF1YW50aXR5KSBxdWFudGl0eSA9IDE7CiAgICBzdGF0ZS5pdGVtcy5wdXNoKHsKICAgICAgaWQ6IGlkLAogICAgICBpbWdVcmw6IGltZ1VybCwKICAgICAgdGl0bGU6IHRpdGxlLAogICAgICBwcmljZTogcHJpY2UsCiAgICAgIHF1YW50aXR5OiBxdWFudGl0eQogICAgfSk7CiAgfSwKICAvLyDlop7liqDllYblk4HmlbDph48KICBpbmNyZW1lbnRJdGVtUXVhbnRpdHk6IGZ1bmN0aW9uIGluY3JlbWVudEl0ZW1RdWFudGl0eShzdGF0ZSwgX3JlZjIpIHsKICAgIHZhciBpZCA9IF9yZWYyLmlkLAogICAgICAgIHF1YW50aXR5ID0gX3JlZjIucXVhbnRpdHk7CiAgICB2YXIgY2FydEl0ZW0gPSBzdGF0ZS5pdGVtcy5maW5kKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIHJldHVybiBpdGVtLmlkID09IGlkOwogICAgfSk7CiAgICBjYXJ0SXRlbS5xdWFudGl0eSArPSBxdWFudGl0eTsKICB9LAogIC8vIOeUqOS6jua4heepuui0reeJqei9pgogIHNldENhcnRJdGVtczogZnVuY3Rpb24gc2V0Q2FydEl0ZW1zKHN0YXRlLCBfcmVmMykgewogICAgdmFyIGl0ZW1zID0gX3JlZjMuaXRlbXM7CiAgICBzdGF0ZS5pdGVtcyA9IGl0ZW1zOwogIH0sCiAgLy8g5Yig6Zmk6LSt54mp6L2m5Lit55qE5Lqn5ZOBCiAgZGVsZXRlQ2FydEl0ZW06IGZ1bmN0aW9uIGRlbGV0ZUNhcnRJdGVtKHN0YXRlLCBpZCkgewogICAgdmFyIGluZGV4ID0gc3RhdGUuaXRlbXMuZmluZEluZGV4KGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIHJldHVybiBpdGVtLmlkID09PSBpZDsKICAgIH0pOwogICAgaWYgKGluZGV4ID4gLTEpIHN0YXRlLml0ZW1zLnNwbGljZShpbmRleCwgMSk7CiAgfQp9Owp2YXIgZ2V0dGVycyA9IHsKICAvLyDorqHnrpfotK3nianovabkuK3miYDmnInllYblk4HnmoTmgLvku7cKICBjYXJ0VG90YWxQcmljZTogZnVuY3Rpb24gY2FydFRvdGFsUHJpY2Uoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5pdGVtcy5yZWR1Y2UoZnVuY3Rpb24gKHRvdGFsLCBwcm9kdWN0KSB7CiAgICAgIHJldHVybiB0b3RhbCArIHByb2R1Y3QucHJpY2UgKiBwcm9kdWN0LnF1YW50aXR5OwogICAgfSwgMCk7CiAgfSwKICAvLyDorqHnrpfotK3nianovabkuK3ljZXpobnllYblk4HnmoTku7fmoLwKICBjYXJ0SXRlbVByaWNlOiBmdW5jdGlvbiBjYXJ0SXRlbVByaWNlKHN0YXRlKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKGlkKSB7CiAgICAgIGlmIChzdGF0ZS5pdGVtcy5sZW5ndGggPiAwKSB7CiAgICAgICAgdmFyIGNhcnRJdGVtID0gc3RhdGUuaXRlbXMuZmluZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIGl0ZW0uaWQgPT09IGlkOwogICAgICAgIH0pOwoKICAgICAgICBpZiAoY2FydEl0ZW0pIHsKICAgICAgICAgIHJldHVybiBjYXJ0SXRlbS5wcmljZSAqIGNhcnRJdGVtLnF1YW50aXR5OwogICAgICAgIH0KICAgICAgfQogICAgfTsKICB9LAogIC8vIOiOt+WPlui0reeJqei9puS4reWVhuWTgeeahOaVsOmHjwogIGl0ZW1zQ291bnQ6IGZ1bmN0aW9uIGl0ZW1zQ291bnQoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5pdGVtcy5sZW5ndGg7CiAgfQp9Owp2YXIgYWN0aW9ucyA9IHsKICAvLyDlop7liqDku7vmhI/mlbDph4/nmoTllYblk4HliLDotK3nianovaYKICBhZGRQcm9kdWN0VG9DYXJ0OiBmdW5jdGlvbiBhZGRQcm9kdWN0VG9DYXJ0KF9yZWY0LCBfcmVmNSkgewogICAgdmFyIHN0YXRlID0gX3JlZjQuc3RhdGUsCiAgICAgICAgY29tbWl0ID0gX3JlZjQuY29tbWl0OwogICAgdmFyIGlkID0gX3JlZjUuaWQsCiAgICAgICAgaW1nVXJsID0gX3JlZjUuaW1nVXJsLAogICAgICAgIHRpdGxlID0gX3JlZjUudGl0bGUsCiAgICAgICAgcHJpY2UgPSBfcmVmNS5wcmljZSwKICAgICAgICBpbnZlbnRvcnkgPSBfcmVmNS5pbnZlbnRvcnksCiAgICAgICAgcXVhbnRpdHkgPSBfcmVmNS5xdWFudGl0eTsKICAgIC8vIGNvbnNvbGUubG9nKCcxMTEnKTsKICAgIGNvbnNvbGUubG9nKHF1YW50aXR5KTsKCiAgICBpZiAoaW52ZW50b3J5ID4gMCkgewogICAgICBjb25zb2xlLmxvZygnMTIyJyk7CiAgICAgIHZhciBjYXJ0SXRlbSA9IHN0YXRlLml0ZW1zLmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbS5pZCA9PSBpZDsKICAgICAgfSk7CiAgICAgIGNvbnNvbGUubG9nKGNhcnRJdGVtKTsKCiAgICAgIGlmICghY2FydEl0ZW0pIHsKICAgICAgICBjb21taXQoJ3B1c2hQcm9kdWN0VG9DYXJ0JywgewogICAgICAgICAgaWQ6IGlkLAogICAgICAgICAgaW1nVXJsOiBpbWdVcmwsCiAgICAgICAgICB0aXRsZTogdGl0bGUsCiAgICAgICAgICBwcmljZTogcHJpY2UsCiAgICAgICAgICBxdWFudGl0eTogcXVhbnRpdHkKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb21taXQoJ2luY3JlbWVudEl0ZW1RdWFudGl0eScsIHsKICAgICAgICAgIGlkOiBpZCwKICAgICAgICAgIHF1YW50aXR5OiBxdWFudGl0eQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogc3RhdGUsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMsCiAgZ2V0dGVyczogZ2V0dGVycywKICBhY3Rpb25zOiBhY3Rpb25zCn07"},{"version":3,"sources":["/Users/jingwow/Desktop/STUDY/前段框架开发/bookstorejo/src/store/modules/cart.js"],"names":["state","items","mutations","pushProductToCart","id","imgUrl","title","price","quantity","console","log","push","incrementItemQuantity","cartItem","find","item","setCartItems","deleteCartItem","index","findIndex","splice","getters","cartTotalPrice","reduce","total","product","cartItemPrice","length","itemsCount","actions","addProductToCart","commit","inventory","namespaced"],"mappings":";;;;AAAA,IAAMA,KAAK,GAAG;AACZC,EAAAA,KAAK,EAAE,EADK,CAEZ;;AAFY,CAAd,C,CAIA;;AACA,IAAMC,SAAS,GAAG;AAChB;AACAC,EAAAA,iBAFgB,6BAEEH,KAFF,QAEiD;AAAA,QAAtCI,EAAsC,QAAtCA,EAAsC;AAAA,QAAlCC,MAAkC,QAAlCA,MAAkC;AAAA,QAA1BC,KAA0B,QAA1BA,KAA0B;AAAA,QAAnBC,KAAmB,QAAnBA,KAAmB;AAAA,QAAZC,QAAY,QAAZA,QAAY;AAC/DC,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACA,QAAI,CAACF,QAAL,EAAeA,QAAQ,GAAG,CAAX;AACfR,IAAAA,KAAK,CAACC,KAAN,CAAYU,IAAZ,CAAiB;AAAEP,MAAAA,EAAE,EAAFA,EAAF;AAAMC,MAAAA,MAAM,EAANA,MAAN;AAAcC,MAAAA,KAAK,EAALA,KAAd;AAAqBC,MAAAA,KAAK,EAALA,KAArB;AAA4BC,MAAAA,QAAQ,EAARA;AAA5B,KAAjB;AACD,GANe;AAQhB;AACAI,EAAAA,qBATgB,iCASMZ,KATN,SAS+B;AAAA,QAAhBI,EAAgB,SAAhBA,EAAgB;AAAA,QAAZI,QAAY,SAAZA,QAAY;AAC7C,QAAIK,QAAQ,GAAGb,KAAK,CAACC,KAAN,CAAYa,IAAZ,CAAiB,UAACC,IAAD;AAAA,aAAUA,IAAI,CAACX,EAAL,IAAWA,EAArB;AAAA,KAAjB,CAAf;AACAS,IAAAA,QAAQ,CAACL,QAAT,IAAqBA,QAArB;AACD,GAZe;AAahB;AACAQ,EAAAA,YAdgB,wBAcHhB,KAdG,SAce;AAAA,QAATC,KAAS,SAATA,KAAS;AAC7BD,IAAAA,KAAK,CAACC,KAAN,GAAcA,KAAd;AACD,GAhBe;AAkBhB;AACAgB,EAAAA,cAnBgB,0BAmBDjB,KAnBC,EAmBMI,EAnBN,EAmBU;AACxB,QAAIc,KAAK,GAAGlB,KAAK,CAACC,KAAN,CAAYkB,SAAZ,CAAsB,UAACJ,IAAD;AAAA,aAAUA,IAAI,CAACX,EAAL,KAAYA,EAAtB;AAAA,KAAtB,CAAZ;AACA,QAAIc,KAAK,GAAG,CAAC,CAAb,EAAgBlB,KAAK,CAACC,KAAN,CAAYmB,MAAZ,CAAmBF,KAAnB,EAA0B,CAA1B;AACjB;AAtBe,CAAlB;AAyBA,IAAMG,OAAO,GAAG;AACd;AACAC,EAAAA,cAAc,EAAE,wBAACtB,KAAD,EAAW;AACzB,WAAOA,KAAK,CAACC,KAAN,CAAYsB,MAAZ,CAAmB,UAACC,KAAD,EAAQC,OAAR,EAAoB;AAC5C,aAAOD,KAAK,GAAGC,OAAO,CAAClB,KAAR,GAAgBkB,OAAO,CAACjB,QAAvC;AACD,KAFM,EAEJ,CAFI,CAAP;AAGD,GANa;AAOd;AACAkB,EAAAA,aAAa,EAAE,uBAAC1B,KAAD;AAAA,WAAW,UAACI,EAAD,EAAQ;AAChC,UAAIJ,KAAK,CAACC,KAAN,CAAY0B,MAAZ,GAAqB,CAAzB,EAA4B;AAC1B,YAAMd,QAAQ,GAAGb,KAAK,CAACC,KAAN,CAAYa,IAAZ,CAAiB,UAACC,IAAD;AAAA,iBAAUA,IAAI,CAACX,EAAL,KAAYA,EAAtB;AAAA,SAAjB,CAAjB;;AACA,YAAIS,QAAJ,EAAc;AACZ,iBAAOA,QAAQ,CAACN,KAAT,GAAiBM,QAAQ,CAACL,QAAjC;AACD;AACF;AACF,KAPc;AAAA,GARD;AAgBd;AACAoB,EAAAA,UAAU,EAAE,oBAAC5B,KAAD,EAAW;AACrB,WAAOA,KAAK,CAACC,KAAN,CAAY0B,MAAnB;AACD;AAnBa,CAAhB;AAqBA,IAAME,OAAO,GAAG;AACd;AACAC,EAAAA,gBAFc,0CAKZ;AAAA,QAFE9B,KAEF,SAFEA,KAEF;AAAA,QAFS+B,MAET,SAFSA,MAET;AAAA,QADE3B,EACF,SADEA,EACF;AAAA,QADMC,MACN,SADMA,MACN;AAAA,QADcC,KACd,SADcA,KACd;AAAA,QADqBC,KACrB,SADqBA,KACrB;AAAA,QAD4ByB,SAC5B,SAD4BA,SAC5B;AAAA,QADuCxB,QACvC,SADuCA,QACvC;AACA;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;;AACA,QAAIwB,SAAS,GAAG,CAAhB,EAAmB;AACjBvB,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACA,UAAMG,QAAQ,GAAGb,KAAK,CAACC,KAAN,CAAYa,IAAZ,CAAiB,UAACC,IAAD;AAAA,eAAUA,IAAI,CAACX,EAAL,IAAWA,EAArB;AAAA,OAAjB,CAAjB;AACAK,MAAAA,OAAO,CAACC,GAAR,CAAYG,QAAZ;;AACA,UAAI,CAACA,QAAL,EAAe;AACbkB,QAAAA,MAAM,CAAC,mBAAD,EAAsB;AAAE3B,UAAAA,EAAE,EAAFA,EAAF;AAAMC,UAAAA,MAAM,EAANA,MAAN;AAAcC,UAAAA,KAAK,EAALA,KAAd;AAAqBC,UAAAA,KAAK,EAALA,KAArB;AAA4BC,UAAAA,QAAQ,EAARA;AAA5B,SAAtB,CAAN;AACD,OAFD,MAEO;AACLuB,QAAAA,MAAM,CAAC,uBAAD,EAA0B;AAAE3B,UAAAA,EAAE,EAAFA,EAAF;AAAMI,UAAAA,QAAQ,EAARA;AAAN,SAA1B,CAAN;AACD;AACF;AACF;AAlBa,CAAhB;AAqBA,eAAe;AACbyB,EAAAA,UAAU,EAAE,IADC;AAEbjC,EAAAA,KAAK,EAALA,KAFa;AAGbE,EAAAA,SAAS,EAATA,SAHa;AAIbmB,EAAAA,OAAO,EAAPA,OAJa;AAKbQ,EAAAA,OAAO,EAAPA;AALa,CAAf","sourcesContent":["const state = {\r\n  items: [],\r\n  //quantity: 0\r\n};\r\n// mutations\r\nconst mutations = {\r\n  // 添加商品到购物车中\r\n  pushProductToCart(state, { id, imgUrl, title, price, quantity }) {\r\n    console.log('nnn');\r\n    if (!quantity) quantity = 1;\r\n    state.items.push({ id, imgUrl, title, price, quantity });\r\n  },\r\n\r\n  // 增加商品数量\r\n  incrementItemQuantity(state, { id, quantity }) {\r\n    let cartItem = state.items.find((item) => item.id == id);\r\n    cartItem.quantity += quantity;\r\n  },\r\n  // 用于清空购物车\r\n  setCartItems(state, { items }) {\r\n    state.items = items;\r\n  },\r\n\r\n  // 删除购物车中的产品\r\n  deleteCartItem(state, id) {\r\n    let index = state.items.findIndex((item) => item.id === id);\r\n    if (index > -1) state.items.splice(index, 1);\r\n  },\r\n};\r\n\r\nconst getters = {\r\n  // 计算购物车中所有商品的总价\r\n  cartTotalPrice: (state) => {\r\n    return state.items.reduce((total, product) => {\r\n      return total + product.price * product.quantity;\r\n    }, 0);\r\n  },\r\n  // 计算购物车中单项商品的价格\r\n  cartItemPrice: (state) => (id) => {\r\n    if (state.items.length > 0) {\r\n      const cartItem = state.items.find((item) => item.id === id);\r\n      if (cartItem) {\r\n        return cartItem.price * cartItem.quantity;\r\n      }\r\n    }\r\n  },\r\n  // 获取购物车中商品的数量\r\n  itemsCount: (state) => {\r\n    return state.items.length;\r\n  },\r\n};\r\nconst actions = {\r\n  // 增加任意数量的商品到购物车\r\n  addProductToCart(\r\n    { state, commit },\r\n    { id, imgUrl, title, price, inventory, quantity }\r\n  ) {\r\n    // console.log('111');\r\n    console.log(quantity);\r\n    if (inventory > 0) {\r\n      console.log('122');\r\n      const cartItem = state.items.find((item) => item.id == id);\r\n      console.log(cartItem);\r\n      if (!cartItem) {\r\n        commit('pushProductToCart', { id, imgUrl, title, price, quantity });\r\n      } else {\r\n        commit('incrementItemQuantity', { id, quantity });\r\n      }\r\n    }\r\n  },\r\n};\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state,\r\n  mutations,\r\n  getters,\r\n  actions,\r\n};\r\n"]}]}